<template>
  <CommonInformationBox :title="title">
    <div
      v-for="skillLine in skillLines"
      class="relative mt-10 -mx-2 sm:mx-0 first:mt-0 flex flex-col items-center"
    >
      <div :class="['grid-cols-' + lineSize]" class="w-full grid">
        <SkillsAggregationEvaluation
          v-for="skill in skillLine.skills"
          :key="skill.id"
          :title="skill.title"
          :pathD="skill.pathD"
        />
      </div>
    </div>
  </CommonInformationBox>
</template>

<script>
import Vue from "vue";
import { v4 as uuidv4 } from "uuid";

export default Vue.extend({
  data: function () {
    return {
      title: "Skill Aggregations",
      skills: [
        {
          id: uuidv4(),
          title: "Backend",
          pathD:
            "M60 10C60 4.47715 64.5077 -0.0848851 69.954 0.831389C79.0555 2.3626 87.7278 5.98137 95.2671 11.459C105.518 18.9067 113.148 29.4084 117.063 41.459C120.979 53.5096 120.979 66.4904 117.063 78.541C114.184 87.404 109.295 95.4291 102.831 102.018C98.9638 105.96 92.6355 104.919 89.3893 100.451L79.9847 87.5066C76.7384 83.0385 77.9861 76.8226 80.7581 72.0458C81.6041 70.588 82.2987 69.0372 82.8254 67.4164C84.3915 62.5962 84.3915 57.4038 82.8254 52.5836C81.2592 47.7634 78.2072 43.5627 74.1068 40.5836C72.7281 39.5819 71.2546 38.7356 69.7133 38.0534C64.6629 35.8182 60 31.5228 60 26L60 10Z",
          strength: "",
          weakness: "",
        },
        {
          id: uuidv4(),
          title: "Frontend",
          pathD:
            "M60 10C60 4.47715 64.5077 -0.0848851 69.954 0.831389C79.0555 2.3626 87.7278 5.98137 95.2671 11.459C105.518 18.9067 113.148 29.4084 117.063 41.459C120.979 53.5096 120.979 66.4904 117.063 78.541C114.184 87.404 109.295 95.4291 102.831 102.018C98.9638 105.96 92.6355 104.919 89.3893 100.451L79.9847 87.5066C76.7384 83.0385 77.9861 76.8226 80.7581 72.0458C81.6041 70.588 82.2987 69.0372 82.8254 67.4164C84.3915 62.5962 84.3915 57.4038 82.8254 52.5836C81.2592 47.7634 78.2072 43.5627 74.1068 40.5836C72.7281 39.5819 71.2546 38.7356 69.7133 38.0534C64.6629 35.8182 60 31.5228 60 26L60 10Z",
          strength: "",
          weakness: "",
        },
        {
          id: uuidv4(),
          title: "Backend",
          pathD:
            "M60 10C60 4.47715 64.5077 -0.0848851 69.954 0.831389C79.0555 2.3626 87.7278 5.98137 95.2671 11.459C105.518 18.9067 113.148 29.4084 117.063 41.459C120.979 53.5096 120.979 66.4904 117.063 78.541C114.184 87.404 109.295 95.4291 102.831 102.018C98.9638 105.96 92.6355 104.919 89.3893 100.451L79.9847 87.5066C76.7384 83.0385 77.9861 76.8226 80.7581 72.0458C81.6041 70.588 82.2987 69.0372 82.8254 67.4164C84.3915 62.5962 84.3915 57.4038 82.8254 52.5836C81.2592 47.7634 78.2072 43.5627 74.1068 40.5836C72.7281 39.5819 71.2546 38.7356 69.7133 38.0534C64.6629 35.8182 60 31.5228 60 26L60 10Z",
          strength: "",
          weakness: "",
        },
        {
          id: uuidv4(),
          title: "Frontend",
          pathD:
            "M60 10C60 4.47715 64.5077 -0.0848851 69.954 0.831389C79.0555 2.3626 87.7278 5.98137 95.2671 11.459C105.518 18.9067 113.148 29.4084 117.063 41.459C120.979 53.5096 120.979 66.4904 117.063 78.541C114.184 87.404 109.295 95.4291 102.831 102.018C98.9638 105.96 92.6355 104.919 89.3893 100.451L79.9847 87.5066C76.7384 83.0385 77.9861 76.8226 80.7581 72.0458C81.6041 70.588 82.2987 69.0372 82.8254 67.4164C84.3915 62.5962 84.3915 57.4038 82.8254 52.5836C81.2592 47.7634 78.2072 43.5627 74.1068 40.5836C72.7281 39.5819 71.2546 38.7356 69.7133 38.0534C64.6629 35.8182 60 31.5228 60 26L60 10Z",
          strength: "",
          weakness: "",
        },
        {
          id: uuidv4(),
          title: "Backend",
          pathD:
            "M60 10C60 4.47715 64.5077 -0.0848851 69.954 0.831389C79.0555 2.3626 87.7278 5.98137 95.2671 11.459C105.518 18.9067 113.148 29.4084 117.063 41.459C120.979 53.5096 120.979 66.4904 117.063 78.541C114.184 87.404 109.295 95.4291 102.831 102.018C98.9638 105.96 92.6355 104.919 89.3893 100.451L79.9847 87.5066C76.7384 83.0385 77.9861 76.8226 80.7581 72.0458C81.6041 70.588 82.2987 69.0372 82.8254 67.4164C84.3915 62.5962 84.3915 57.4038 82.8254 52.5836C81.2592 47.7634 78.2072 43.5627 74.1068 40.5836C72.7281 39.5819 71.2546 38.7356 69.7133 38.0534C64.6629 35.8182 60 31.5228 60 26L60 10Z",
          strength: "",
          weakness: "",
        },
        {
          id: uuidv4(),
          title: "Frontend",
          pathD:
            "M60 10C60 4.47715 64.5077 -0.0848851 69.954 0.831389C79.0555 2.3626 87.7278 5.98137 95.2671 11.459C105.518 18.9067 113.148 29.4084 117.063 41.459C120.979 53.5096 120.979 66.4904 117.063 78.541C114.184 87.404 109.295 95.4291 102.831 102.018C98.9638 105.96 92.6355 104.919 89.3893 100.451L79.9847 87.5066C76.7384 83.0385 77.9861 76.8226 80.7581 72.0458C81.6041 70.588 82.2987 69.0372 82.8254 67.4164C84.3915 62.5962 84.3915 57.4038 82.8254 52.5836C81.2592 47.7634 78.2072 43.5627 74.1068 40.5836C72.7281 39.5819 71.2546 38.7356 69.7133 38.0534C64.6629 35.8182 60 31.5228 60 26L60 10Z",
          strength: "",
          weakness: "",
        },
        {
          id: uuidv4(),
          title: "Backend",
          pathD:
            "M60 10C60 4.47715 64.5077 -0.0848851 69.954 0.831389C79.0555 2.3626 87.7278 5.98137 95.2671 11.459C105.518 18.9067 113.148 29.4084 117.063 41.459C120.979 53.5096 120.979 66.4904 117.063 78.541C114.184 87.404 109.295 95.4291 102.831 102.018C98.9638 105.96 92.6355 104.919 89.3893 100.451L79.9847 87.5066C76.7384 83.0385 77.9861 76.8226 80.7581 72.0458C81.6041 70.588 82.2987 69.0372 82.8254 67.4164C84.3915 62.5962 84.3915 57.4038 82.8254 52.5836C81.2592 47.7634 78.2072 43.5627 74.1068 40.5836C72.7281 39.5819 71.2546 38.7356 69.7133 38.0534C64.6629 35.8182 60 31.5228 60 26L60 10Z",
          strength: "",
          weakness: "",
        },
        {
          id: uuidv4(),
          title: "Frontend",
          pathD:
            "M60 10C60 4.47715 64.5077 -0.0848851 69.954 0.831389C79.0555 2.3626 87.7278 5.98137 95.2671 11.459C105.518 18.9067 113.148 29.4084 117.063 41.459C120.979 53.5096 120.979 66.4904 117.063 78.541C114.184 87.404 109.295 95.4291 102.831 102.018C98.9638 105.96 92.6355 104.919 89.3893 100.451L79.9847 87.5066C76.7384 83.0385 77.9861 76.8226 80.7581 72.0458C81.6041 70.588 82.2987 69.0372 82.8254 67.4164C84.3915 62.5962 84.3915 57.4038 82.8254 52.5836C81.2592 47.7634 78.2072 43.5627 74.1068 40.5836C72.7281 39.5819 71.2546 38.7356 69.7133 38.0534C64.6629 35.8182 60 31.5228 60 26L60 10Z",
          strength: "",
          weakness: "",
        },
      ],
      lineSize: 0,
      skillLines: [],
    };
  },
  watch: {
    lineSize(newSize, oldSize) {
      if (newSize !== oldSize) {
        const lines = [];
        for (let i = 0; i < this.skills.length; i += newSize) {
          lines.push({
            skills: this.skills.slice(i, i + newSize),
          });
        }

        console.log(111, lines);
        this.skillLines = lines;
      }
    },
  },
  methods: {
    calculateLineSize() {
      const sm = 654,
        lg = 1024;

      if (window.innerWidth < sm) {
        this.lineSize = 2;
      } else if (window.innerWidth < lg) {
        this.lineSize = 3;
      } else {
        this.lineSize = 4;
      }
    },
  },
  mounted() {
    if (process.client) {
      this.calculateLineSize();

      window.addEventListener("resize", this.calculateLineSize);
    }
  },
  beforeDestroy() {
    window.removeEventListener("resize", this.onResize);
  },
});
</script>
